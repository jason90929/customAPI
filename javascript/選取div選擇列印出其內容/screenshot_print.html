<button id="print">Run print</button>

<script src="canvas2image.js"></script>
<script src="html2canvas.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#print").on("click", function() {
        //screenshot(DOM, true for fullscreen);
        screenshot("#target");
    });

    function screenshot(a, b){
        if(!b){var d=$(a); var e=$(window).width(); var f=$(a).height()+d.offset().top;}
        else{d=document.body; e=$(window).width(); f=$(document).height();}
        var c = document.createElement("canvas");
        c.width=e; c.height=f; c.style.display="none";
        document.body.appendChild(c);
        document.querySelector("canvas").style.display = "block";
        var canvas = document.querySelector("canvas");
        html2canvas(d, {canvas: canvas}).then(function(canvas) {
            var x = Canvas2Image.convertToPNG(canvas, e, f);
            var di = document.createElement("div");
            $(di).attr("class", "crop");
            var st = document.createElement("style");
            if(!b){st.innerText=".crop {width: "+e+"px;height: "+(f-d.offset().top)+"px;overflow: hidden;}.crop img {margin: -"+d.offset().top+"px 0 0 -"+d.offset().left+"px;}";}
            var CanvasWindow = document.open("", "Canvas", 'width=' +screen.width+ ', height='+screen.height);
            CanvasWindow.document.body.appendChild(st);
            CanvasWindow.document.body.appendChild(di);
            CanvasWindow.document.querySelector("div").appendChild(x);
            document.querySelector("canvas").style.display = "none";
            CanvasWindow.print();
            CanvasWindow.close();
            document.body.removeChild(c);
        });
    }

});
</script>
